---
title: "Guest lecture Data Science Fundamentals"
subtitle: "On roads travelled, unnecessary shots, and the data that connects them"
author: "Aurélien Sallin, PhD"
date: "2025-10-29"
echo: false
code-line-numbers: false
format:
  revealjs:
    output-file: index.html
    theme: presentation-theme.scss
    slide-number: false
    chalkboard: true
    preview-links: auto
    css: styles.css  # Include your main CSS if needed
    footer: "Aurélien Sallin, PhD"
    # logo: media/logo.png  # if you have a logo
    transition: fade
    background-transition: fade
    smaller: false
    scrollable: false
    incremental: false
highlight-style: dracula
cache: false
bibliography: references.bib
---

![](img/intro.svg){width=100%}

# My journey to data science

## Choice #1: Philo vs Econom(etr)ics

::::: {.columns}
:::: {.column width="50%"}
\

- I studied philosophy to understand stuff.
- Then I discovered econometrics and causal inference.
- I liked the idea of using causal inference to guide policy making.

::::
:::: {.column width="50%"}
\
![](img/path1.svg){width=100%}
::::
:::::


## Choice #2: PhD vs Work

:::: {.columns}
::: {.column width="50%"}

\

- As a MA student assistant, I was initiated to research in applied econ.
- I went for a PhD in Econometrics and Finance at HSG.
- PhD was a great experience, and was intensely rich in learning.*

:::
::: {.column width="50%"}
\
![](img/path2.svg){width=100%}
:::
:::::

::: {style="position: absolute; bottom: 20px; font-size: 0.5em; color: gray;"}
\* Don't google "phd and mental health" (there is a fascinating 2025 study about it in the [Journal of Health Economics](https://www.sciencedirect.com/science/article/pii/S0167629625001055)).
:::

::: {.notes}
I see a PhD as a career choice similar to working a first job. There is no hierarchy here.
:::



## Choice #3: Academia vs Industry

:::: {.columns}
:::: {.column width="50%"}

\

- Crucial for me: impact on real-life decisions, develop leadership skills, have fun, ...
- Now: **Senior Economist/Data Scientist** at a major Swiss Healthcare company.

::::
:::: {.column width="50%"}
\
![](img/path4.svg){width=100%}
::::
:::::

\


# Claims Data: My 🥖 and 🧈

## Claims Data

In my everyday life, I work mostly with **claims data**

   - digital trail of every medical interaction in Switzerland
   - billing data
   - \>130mio invoices per year



::: {.notes}
Bridge from personal story to the case study.
:::

```{r setup}
#| output: false
#| echo: false

library(ggplot2)
library(dplyr)
library(readr)
library(qs)

dataGraph <- qread("data/dataGraph.qs")
dfgraph <- dataGraph$dfGraph_long
counterfactualM <- dataGraph$counterfactual_long
out <- dataGraph$out
dfgraph <- rename(dfgraph, "y" = y1_)

plot_vitd_masked <- function(
    dfgraph,
    counterfactualM,
    mask_from = NULL,
    mask_counterfactual_from = NULL,
    x = 0.8
) {
    # Filter data based on mask_from parameter instead of using rectangles
    dfgraph_filtered <- if (!is.null(mask_from)) {
        subset(dfgraph, time <= mask_from)
    } else {
        dfgraph
    }

    # Create counterfactual dataframe
    counterfactual_df <- data.frame(
        time = dfgraph$time,
        counterfactual = counterfactualM
    )

    # Filter counterfactual data if needed
    if (!is.null(mask_counterfactual_from)) {
        counterfactual_df <- subset(counterfactual_df, time <= mask_counterfactual_from)
    }

    # Filter counterfactual by mask_from as well
    if (!is.null(mask_from)) {
        counterfactual_df <- subset(counterfactual_df, time <= mask_from)
    }

    p <- ggplot(dfgraph, aes(y = y * 100, x = time)) +
        geom_line(
            data = dfgraph_filtered,
            aes(
                color = "Observed",
                size = "Observed",
                linetype = "Observed"
            )
        ) +
        geom_line(
            data = counterfactual_df,
            aes(
                y = counterfactual * 100,
                color = "Counterfactual",
                size = "Counterfactual",
                linetype = "Counterfactual"
            )
        ) +
        geom_line(
            data = subset(dfgraph_filtered, time <= 0),
            aes(
                y = pred * 100,
                color = "Predicted",
                size = "Predicted",
                linetype = "Predicted"
            )
        ) +
        geom_line(
            data = subset(dfgraph_filtered, time >= 0),
            aes(
                y = pred * 100,
                color = "Predicted",
                size = "Predicted",
                linetype = "Predicted"
            )
        ) +

        scale_linetype_manual(
            name = "",
            values = c("Observed" = 1, "Predicted" = 1, "Counterfactual" = 4)
        ) +
        scale_size_manual(
            name = "",
            values = c(
                "Observed" = x * 0.8,
                "Predicted" = x * 1,
                "Counterfactual" = x * 1.25
            )
        ) +
        scale_color_manual(
            name = "",
            values = c(
                "Observed" = "grey40",
                "Predicted" = "#E22920",
                "Counterfactual" = "#01BBA8"
            )
        ) +
        scale_x_continuous(
            limits = c(-50, 18),
            breaks = c(-50, -39, -27, -15, -3, 0, 9, 15, 21) - 15,
            labels = c(
                "Jan.\n2017",
                "Jan.\n2018",
                "Jan.\n2019",
                "Jan.\n2020",
                "Jan.\n2021",
                "Apr.\n2021",
                "Jan.\n2022",
                "Jun.\n2022",
                "Jan.\n2023"
            )
        ) +
        scale_y_continuous(
            limits = c(1.5, 7),
            breaks = seq(2, 7, 1)
        ) +
        annotate(
            "rect",
            xmin = -28,
            xmax = -24,
            ymin = -Inf,
            ymax = Inf,
            alpha = 0.1,
            fill = "#00857C"
        ) +
        geom_text(
            aes(x = -26, y = 1.8, label = "COVID19 \nLockdown"),
            color = "#00857C",
            size = x * 3
        ) +
        labs(
            y = "Monthly Vitamin D test prescriptions per 100 consultations",
            x = NULL
        ) +
        theme_classic() +
        theme(
            plot.background = element_rect(fill = "#e6f1f2", color = NA),
            panel.background = element_rect(fill = "#e6f1f2", color = NA),
            legend.background = element_rect(fill = "#e6f1f2"),
            legend.position = "bottom",
            panel.grid.major.x = element_line(color = "white"),
            panel.grid.major.y = element_line(color = "white"),
            axis.text.x = element_text(size = x * 10),
            axis.text.y = element_text(size = x * 10),
            axis.title = element_text(size = x * 11),
            legend.text = element_text(size = x * 10)
        )

    # Add vertical lines conditionally based on data support
    if (is.null(mask_from) || mask_from >= -15) {
        p <- p + geom_vline(
            xintercept = -15,
            color = "#E22920",
            lty = 20,
            linewidth = x * 1.5
        )
    }

    if (is.null(mask_from) || mask_from >= 0) {
        p <- p + geom_vline(
            xintercept = 0,
            color = "#675482",
            lty = 20,
            linewidth = x * 1.5
        )
    }

    p
}
```

## Every medical act gets coded...

![](img/claimsdata1.svg){width=100%}

## ... linked to a patient ...

![](img/claimsdata2.svg){width=100%}

## ... who makes a claim for reimbursement...

![](img/claimsdata3.svg){width=100%}

## ... to a health insurer.

![](img/claimsdata4.svg){width=100%}

## Personal patient information

![](img/tarmed1.svg){width=100%}

## Standardized medical treatment and pricing

![](img/tarmed2.svg){width=100%}


## In a nutshell

#### Contain billing information

- Each medical act is coded and mapped to a price.
- Follow patients over time.
- Comprehensive view of patient healthcare utilization patterns.

\

#### Follow strict standards
- Structure and standards are defined for data exchange.
- XML standards for electronic data exchange (see [example](https://www.forum-datenaustausch.ch/fileadmin/fda_documents/5.0/Rechnungen/XML-Schemas/D_Anpassungen_XML-Standard_generalInvoice_5.0_20241209.pdf))


##
\

\

\

::: {style="text-align: center;"}
##### What can we use these data for?
:::


# Use case: low value care and Vit D tests 💉

## The Problem: Low-Value Care and Vitamin D

::::: {.columns}
:::: {.column width="65%"}
::: {.incremental}

- **We want to effectively reduce low-value care**
    - Services with limited patient benefit but **high costs** (How much❓)
<br>
<br>

- **Vitamin D testing** is a perfect example
  - Clinical guidelines consistently advise **against** routine testing for low-risk individuals
  - Yet testing rates almost **doubled** between 2013-2020 in Switzerland
<br>
<br>

- **We studied which policy tools are most effective**
  - Our findings made national headlines

:::
::::
:::: {.column width="35%"}
::: {.fragment}
![](img/sonntagszeitung.jpg){width=100%}

:::
::::
:::::

::: {.notes}

- **Low-value care:** Services with limited patient benefit but high costs

This study examines a real-world natural experiment in Switzerland where two different policy tools were used to reduce low-value care.

- **Published in October 2025**, multidisciplinary collaboration primary care physicians, public health and health economists

:::

---

## Switzerland's Policy Response

:::: {.columns}
::: {.column width="70%"}
::: {.fragment}
#### April 2021: "Smarter Medicine Initiative"

- Added vitamin D testing to "procedures to avoid" list
- **Clear recommendation:** No routine measurement for patients without risk factors
:::
:::
::: {.column width="30%"}
::: {.fragment}
![](img/smartermedicine.png){width=80%}
:::
:::
::::

\

:::: {.columns}
::: {.column width="70%"}
::: {.fragment}
#### July 2022: Coverage Restriction

- Federal Office of Public Health introduced *limitatio*
- Limited reimbursement for routine tests
- **Patients pay out-of-pocket** for unnecessary tests
:::
:::
::: {.column width="30%"}
::: {.fragment}
![](img/bag.png){width=80%}
:::
:::
::::

---

## Our Data and Methods

::: {.incremental}
- **Data Source:** Mandatory health insurance claims from SWICA
  - ~10% of Swiss population
  - 3,600+ general practitioners and group practices
  - Adult patients with ≥1 consultation (2018-2023)

\

- **Method:** Interrupted Time-Series Analysis
  - Compares observed data with counterfactual trend
  - Accounts for patient characteristics and clinical indications
:::



---

## Some Time-series Modelling {transition="fade" transition-speed="fast"}

\

::::: {.columns}
:::: {.column width="80%"}
::: {style="position: relative;"}
```{r}
#| fig.width: 10
#| fig.height: 6
plot_vitd_masked(dfgraph, counterfactualM, mask_from = -16)
```

::: {style="position: absolute; top: 0%; left: 85%; background-color: rgba(230, 241, 242, 0.9); padding: 10px; border-radius: 5px; font-size: 20px; max-width: 40%;"}
$$\begin{aligned} {y_{it}} &= {\beta _0} + {\beta _1}{t_{it}} + {\beta _2}{x_t} + {\beta _3}\left( {{t_{it}} \times {x_t}} \right) \\&\quad+ {\beta _4}{Z_{it}} + {\alpha _i} + {\gamma _t} + { \in _{it}} \end{aligned}$$

<span style="color: grey; font-weight: bold; font-size: 1.2em;">Linear model with time variable, treatment variables, individual controls and seasonality patterns

<span style="color: grey; font-weight: bold; font-size: 1.2em;">●</span> **Grey line** = Actual vitamin D tests prescribed monthly

<span style="color: #E22920; font-weight: bold; font-size: 1.2em;">●</span> **Red line** = Statistical model predictions
:::
:::
::::
:::: {.column width="20%"}

::::
:::::

::: {.notes}
This is our econometric model for the interrupted time series analysis. The model includes time trends, intervention effects, and controls for both patient and physician characteristics.
:::

---

## Rising Prescriptions Despite Low Value {transition="fade" transition-speed="fast"}

\

::::: {.columns}
:::: {.column width="80%"}
```{r}
#| fig.width: 10
#| fig.height: 6
plot_vitd_masked(dfgraph, counterfactualM, mask_from = -16)
```
::::
:::: {.column width="20%"}
\
Vitamin D test prescriptions rose by 20% between 2018 and 2021
::::
:::::

---

## April 2021: Clinical Recommendations {transition="fade" transition-speed="fast"}

\

::::: {.columns}
:::: {.column width="80%"}
```{r}
#| fig.width: 10
#| fig.height: 6
plot_vitd_masked(dfgraph, counterfactualM, mask_from = -1, mask_counterfactual_from = -15)
```
::::
:::: {.column width="20%"}
\
Smarter Medicine recommendation shows a slight downward trend

![](img/smartermedicine.png){width=80%}


::::
:::::


---

## Revealing the Counterfactual {transition="fade" transition-speed="fast"}

\

::::: {.columns}
:::: {.column width="80%"}
```{r}
#| fig.width: 10
#| fig.height: 6
plot_vitd_masked(dfgraph, counterfactualM, mask_from = -1, mask_counterfactual_from = 0)
```
::::
:::: {.column width="20%"}
::: {style="font-size: 90%;"}
The **dashed line** shows what would have happened without the recommendation.

**Result:** The clinical recommendation reduced tests by **6%** in 12 months
:::
::::
:::::

---

## July 2022: Financial Incentives Enter {transition="fade" transition-speed="fast"}

\

::::: {.columns}
:::: {.column width="80%"}
```{r}
#| fig.width: 10
#| fig.height: 6
plot_vitd_masked(dfgraph, counterfactualM, mask_from = 0)
```
::::
:::: {.column width="20%"}
Federal Office of Public Health restricts coverage

Patients now pay out-of-pocket for routine tests

![](img/bag.png){width=80%}

::::
:::::

---

## Financial Incentives: The Game Changer {transition="fade" transition-speed="fast"}

\

::::: {.columns}
:::: {.column width="80%"}
```{r}
#| fig.width: 10
#| fig.height: 6
plot_vitd_masked(dfgraph, counterfactualM, mask_from = NULL)
```
::::
:::: {.column width="20%"}
The number of tests per consultation drops by 58% in 6 months
::::
:::::

---

## The Bottom Line: Major Healthcare Savings {transition="fade" transition-speed="fast"}

\

::::: {.columns}
:::: {.column width="80%"}
```{r}
#| fig.width: 10
#| fig.height: 6
plot_vitd_masked(dfgraph, counterfactualM, mask_from = NULL)
```
::::
:::: {.column width="20%"}
Healthcare system savings:

  - 15.65 million CHF in 2022 alone
  - 1.8 CHF per Swiss resident
::::
:::::

---

## Key Findings and Policy Implications

::: {.fragment}
**Main Results**
:::

::: {.incremental}
- Clinical recommendations: **-6%** reduction
- Financial incentives: **-58%** reduction
- **No unintended consequences** on patient care
:::

\

::: {.fragment}
**Policy Lessons**
:::

::: {.incremental}
- Financial incentives far more effective than guidelines alone
- But removing coverage cannot be the default solution
- High administrative burden for physicians
:::


::: {.notes}
**No unintended consequences:**

- Vitamin D supplementation rates unchanged
- Policy targeted testing without compromising treatment

**No unintended consequences:**

- Vitamin D supplementation rates unchanged
- Policy targeted testing without compromising treatment
:::
---

## We just published our results

::::: {.columns}
:::: {.column width="60%"}
**Full Study:** [@sallin2025impact] [🔗](https://bmchealthservres.biomedcentral.com/articles/10.1186/s12913-025-13524-9)

\

- **Multi-disciplinary team:**
    - Health services research, SWICA
    - Institute of Primary Care, University of Zürich
    - Institute of Health Economics and Health Policy, Bern University of Applied Sciences
::::
:::: {.column width="40%"}
::: {.fragment}
![](img/bmc2025.png){width=100%}
:::
::::
:::::


# Where to go from here? 🌎

## Where to go from here?

\

1. Learn until you've developed an Intuition.
2. Invest in Communication.
3. Explore and show your Work.

::: {.notes}
1. **Learn until you've developed an Intuition** - Master the fundamentals, but keep questioning
2. **Invest in Communication** - The best analysis is worthless if you can't explain it
3. **Explore and show your work** - Share your projects, get feedback, build a portfolio
:::


## Keep in touch

\
\
\

::: {style="text-align: center;"}
[asallin.github.io](https://asallin.github.io/)
:::


# Thanks.


## References

::: {#refs}
:::